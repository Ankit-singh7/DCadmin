function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,c){return e&&_defineProperties(t.prototype,e),c&&_defineProperties(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{gvMv:function(t,e,c){"use strict";c.r(e);var n=c("ofXK"),o=c("tyNb"),r=c("wd/R"),i=c("PSD3"),a=c.n(i),s=c("fXoL"),l=c("pVIR"),d=c("AXIP"),u=c("3Pt+"),f=["closeEditModal"];function h(t,e){if(1&t&&(s.ac(0),s.cc(1,"td"),s.cc(2,"B"),s.Mc(3),s.pc(4,"titlecase"),s.bc(),s.bc(),s.cc(5,"td"),s.Mc(6),s.bc(),s.Zb()),2&t){var c=s.oc().$implicit;s.Jb(3),s.Nc(s.qc(4,2,c.food_name)),s.Jb(3),s.Nc(c.quantity)}}function b(t,e){if(1&t&&(s.cc(0,"tr"),s.Kc(1,h,7,4,"ng-container",19),s.bc()),2&t){var c=e.$implicit;s.Jb(1),s.vc("ngIf",c.quantity>0)}}function p(t,e){if(1&t&&(s.cc(0,"tbody",17),s.Kc(1,b,2,1,"tr",18),s.bc()),2&t){var c=s.oc();s.Jb(1),s.vc("ngForOf",c.reportList)}}function g(t,e){if(1&t&&(s.cc(0,"tbody"),s.cc(1,"tr"),s.cc(2,"td",20),s.Mc(3),s.bc(),s.bc(),s.bc()),2&t){var c=s.oc();s.Jb(3),s.Nc(c.response)}}var v,m,y=[{path:"",component:(v=function(){function t(e,c,n){var o=this;_classCallCheck(this,t),this.router=e,this.foodService=c,this.ui=n,this.name=[],this.sortOrder=!1,this.sortFields={quantity:!0,food_name:!0},this.reportList=[],this.response="No Data to Show",this.selectedPerPage=10,this.currentpage=1,this.onLimitSelect=function(t){o.selectedPerPage=t,o.getAllReport()},this.logout=function(){localStorage.setItem("isLoggedIn",String(!1)),o.router.navigate(["/login"])}}return _createClass(t,[{key:"ngOnInit",value:function(){this.getAllReport()}},{key:"getAllReport",value:function(){var t=this,e={startDate:r(this.selectedStartDate).format("DD-MM-YYYY"),endDate:r(this.selectedEndDate).format("DD-MM-YYYY")},c="";for(var n in e)e[n]&&(c="".concat(c).concat(n,"=").concat(e[n],"&"));this.ui.loader.show(),this.foodService.getAllSalesReport(c).subscribe((function(e){t.reportList=[],e.data&&function(){var c=JSON.parse(JSON.stringify(e.data)),n=c.map((function(t){return t.ingredient_id}));console.log(n);for(var o=function(e){var n=c.filter((function(t){return t.food_id===c[e].food_id}));if(console.log(n),n.length>1){for(var o=JSON.parse(JSON.stringify(n[0])),r=0,i=0;i<n.length;i++)r+=n[i].quantity;o.quantity=r,t.reportList.some((function(t){return t.food_id===o.food_id}))||t.reportList.push(Object.assign({},o))}else t.reportList.push(n[0])},r=0;r<c.length;r++)o(r);console.log(t.reportList)}(),t.ui.loader.hide()}),(function(e){t.ui.loader.hide()}))}},{key:"onDateSelect",value:function(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():a.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):a.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}},{key:"changeOrder",value:function(t){var e=this;this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((function(c,n){return"quantity"===t||"quantity"===t?e.sortOrder?n[t]-c[t]:c[t]-n[t]:e.sortOrder?n[t].localeCompare(c[t]):c[t].localeCompare(n[t])}))}},{key:"changedDate",value:function(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}]),t}(),v.\u0275fac=function(t){return new(t||v)(s.Wb(o.e),s.Wb(l.a),s.Wb(d.a))},v.\u0275cmp=s.Qb({type:v,selectors:[["app-sales-report"]],viewQuery:function(t,e){var c;1&t&&s.Rc(f,!0),2&t&&s.Cc(c=s.lc())&&(e.closeEditModal=c.first)},decls:31,vars:12,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-3","cus-srch"],[1,"form-group"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"width","100%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.Mc(4," FROM DATE "),s.cc(5,"input",4),s.kc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(6,"div",2),s.cc(7,"div",3),s.Mc(8," TO DATE "),s.cc(9,"input",5),s.kc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(10,"div",6),s.cc(11,"div",7),s.cc(12,"button",8),s.kc("click",(function(){return e.onDateSelect()})),s.cc(13,"b"),s.Mc(14,"SEARCH"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(15,"div",9),s.cc(16,"div",10),s.cc(17,"table",11),s.cc(18,"thead"),s.cc(19,"tr"),s.cc(20,"th",12),s.Mc(21,"Product Name"),s.cc(22,"a",13),s.kc("click",(function(){return e.changeOrder("food_name")})),s.Xb(23,"i",14),s.bc(),s.bc(),s.cc(24,"th",12),s.Mc(25,"Quantity Sold"),s.cc(26,"a",13),s.kc("click",(function(){return e.changeOrder("quantity")})),s.Xb(27,"i",14),s.bc(),s.bc(),s.bc(),s.bc(),s.Kc(28,p,2,1,"tbody",15),s.Kc(29,g,4,1,"ng-template",null,16,s.Lc),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&t){var c=s.Dc(30);s.Jb(5),s.vc("ngModel",e.selectedStartDate),s.Jb(4),s.vc("ngModel",e.selectedEndDate),s.Jb(14),s.Nb("fa-caret-down",e.sortFields.food_name)("fa-caret-up",!e.sortFields.food_name),s.Jb(4),s.Nb("fa-caret-down",e.sortFields.quantity)("fa-caret-up",!e.sortFields.quantity),s.Jb(1),s.vc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",c)}},directives:[u.b,u.h,u.k,n.l,n.k],pipes:[n.r],styles:[""]}),v)}],D=((m=function t(){_classCallCheck(this,t)}).\u0275mod=s.Ub({type:m}),m.\u0275inj=s.Tb({factory:function(t){return new(t||m)},imports:[[o.i.forChild(y)],o.i]}),m),S=c("oOf3");c.d(e,"SalesReportModule",(function(){return k}));var w,k=((w=function t(){_classCallCheck(this,t)}).\u0275mod=s.Ub({type:w}),w.\u0275inj=s.Tb({factory:function(t){return new(t||w)},imports:[[n.b,u.d,D,S.a]]}),w)}}]);