function _createForOfIteratorHelper(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,c=function(){};return{s:c,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{gvMv:function(t,e,r){"use strict";r.r(e);var n=r("ofXK"),c=r("tyNb"),o=r("wd/R"),a=r("PSD3"),i=r.n(a),l=r("fXoL"),s=r("pVIR"),u=r("sumL"),d=r("AXIP"),f=r("3Pt+"),h=["closeEditModal"];function p(t,e){if(1&t&&(l.ac(0),l.cc(1,"td"),l.cc(2,"B"),l.Mc(3),l.pc(4,"titlecase"),l.bc(),l.bc(),l.cc(5,"td"),l.Mc(6),l.bc(),l.Zb()),2&t){var r=l.oc().$implicit;l.Jb(3),l.Nc(l.qc(4,2,r.food_name)),l.Jb(3),l.Nc(r.quantity)}}function b(t,e){if(1&t&&(l.cc(0,"tr"),l.Kc(1,p,7,4,"ng-container",19),l.bc()),2&t){var r=e.$implicit;l.Jb(1),l.vc("ngIf",r.quantity>0)}}function g(t,e){if(1&t&&(l.cc(0,"tbody",17),l.Kc(1,b,2,1,"tr",18),l.bc()),2&t){var r=l.oc();l.Jb(1),l.vc("ngForOf",r.reportList)}}function v(t,e){if(1&t&&(l.cc(0,"tbody"),l.cc(1,"tr"),l.cc(2,"td",20),l.Mc(3),l.bc(),l.bc(),l.bc()),2&t){var r=l.oc();l.Jb(3),l.Nc(r.response)}}var y,m,k=[{path:"",component:(y=function(){function t(e,r,n,c){var o=this;_classCallCheck(this,t),this.router=e,this.foodService=r,this.billService=n,this.ui=c,this.name=[],this.sortOrder=!1,this.sortFields={quantity:!0,food_name:!0},this.reportList=[],this.response="No Data to Show",this.selectedPerPage=1e4,this.currentpage=1,this.onLimitSelect=function(t){o.selectedPerPage=t,o.getAllReport()},this.logout=function(){localStorage.setItem("isLoggedIn",String(!1)),o.router.navigate(["/login"])}}return _createClass(t,[{key:"ngOnInit",value:function(){this.getAllReport()}},{key:"getAllReport",value:function(){var t=this,e={startDate:o(this.selectedStartDate).format("DD-MM-YYYY"),endDate:o(this.selectedEndDate).format("DD-MM-YYYY")},r="";for(var n in e)e[n]&&(r="".concat(r).concat(n,"=").concat(e[n],"&"));this.ui.loader.show(),this.billService.getBillingList(this.selectedPerPage,this.currentpage,r).subscribe((function(e){t.reportList=[],e.data&&function(){var r,n=JSON.parse(JSON.stringify(e.data.result)),c=[],o=_createForOfIteratorHelper(n);try{for(o.s();!(r=o.n()).done;){var a,i=_createForOfIteratorHelper(r.value.products);try{for(i.s();!(a=i.n()).done;){var l=a.value;c.push(l)}}catch(d){i.e(d)}finally{i.f()}}}catch(d){o.e(d)}finally{o.f()}c.map((function(t){return t.food_id}));for(var s=function(e){var r=c.filter((function(t){return t.food_id===c[e].food_id}));if(console.log(r),r.length>1){for(var n=JSON.parse(JSON.stringify(r[0])),o=0,a=0;a<r.length;a++)o+=r[a].quantity;n.quantity=o,t.reportList.some((function(t){return t.food_id===n.food_id}))||t.reportList.push(Object.assign({},n))}else t.reportList.push(r[0])},u=0;u<c.length;u++)s(u);console.log(t.reportList)}(),t.ui.loader.hide()}),(function(e){t.ui.loader.hide()}))}},{key:"onDateSelect",value:function(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():i.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):i.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}},{key:"changeOrder",value:function(t){var e=this;this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((function(r,n){return"quantity"===t||"quantity"===t?e.sortOrder?n[t]-r[t]:r[t]-n[t]:e.sortOrder?n[t].localeCompare(r[t]):r[t].localeCompare(n[t])}))}},{key:"changedDate",value:function(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}]),t}(),y.\u0275fac=function(t){return new(t||y)(l.Wb(c.e),l.Wb(s.a),l.Wb(u.a),l.Wb(d.a))},y.\u0275cmp=l.Qb({type:y,selectors:[["app-sales-report"]],viewQuery:function(t,e){var r;1&t&&l.Rc(h,!0),2&t&&l.Cc(r=l.lc())&&(e.closeEditModal=r.first)},decls:31,vars:12,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-3","cus-srch"],[1,"form-group"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"width","100%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(l.cc(0,"div",0),l.cc(1,"div",1),l.cc(2,"div",2),l.cc(3,"div",3),l.Mc(4," FROM DATE "),l.cc(5,"input",4),l.kc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),l.bc(),l.bc(),l.bc(),l.cc(6,"div",2),l.cc(7,"div",3),l.Mc(8," TO DATE "),l.cc(9,"input",5),l.kc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),l.bc(),l.bc(),l.bc(),l.cc(10,"div",6),l.cc(11,"div",7),l.cc(12,"button",8),l.kc("click",(function(){return e.onDateSelect()})),l.cc(13,"b"),l.Mc(14,"SEARCH"),l.bc(),l.bc(),l.bc(),l.bc(),l.cc(15,"div",9),l.cc(16,"div",10),l.cc(17,"table",11),l.cc(18,"thead"),l.cc(19,"tr"),l.cc(20,"th",12),l.Mc(21,"Product Name"),l.cc(22,"a",13),l.kc("click",(function(){return e.changeOrder("food_name")})),l.Xb(23,"i",14),l.bc(),l.bc(),l.cc(24,"th",12),l.Mc(25,"Quantity Sold"),l.cc(26,"a",13),l.kc("click",(function(){return e.changeOrder("quantity")})),l.Xb(27,"i",14),l.bc(),l.bc(),l.bc(),l.bc(),l.Kc(28,g,2,1,"tbody",15),l.Kc(29,v,4,1,"ng-template",null,16,l.Lc),l.bc(),l.bc(),l.bc(),l.bc(),l.bc()),2&t){var r=l.Dc(30);l.Jb(5),l.vc("ngModel",e.selectedStartDate),l.Jb(4),l.vc("ngModel",e.selectedEndDate),l.Jb(14),l.Nb("fa-caret-down",e.sortFields.food_name)("fa-caret-up",!e.sortFields.food_name),l.Jb(4),l.Nb("fa-caret-down",e.sortFields.quantity)("fa-caret-up",!e.sortFields.quantity),l.Jb(1),l.vc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",r)}},directives:[f.b,f.h,f.k,n.l,n.k],pipes:[n.r],styles:[""]}),y)}],S=((m=function t(){_classCallCheck(this,t)}).\u0275mod=l.Ub({type:m}),m.\u0275inj=l.Tb({factory:function(t){return new(t||m)},imports:[[c.i.forChild(k)],c.i]}),m),D=r("oOf3");r.d(e,"SalesReportModule",(function(){return _}));var w,_=((w=function t(){_classCallCheck(this,t)}).\u0275mod=l.Ub({type:w}),w.\u0275inj=l.Tb({factory:function(t){return new(t||w)},imports:[[n.b,f.d,S,D.a]]}),w)},sumL:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var n=r("AytR"),c=r("fXoL"),o=r("tk/3"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getBillingList",value:function(t,e,r){return this.http.get("".concat(n.a.apiURL,"/bill/view/all?per_page=").concat(t,"&current_page=").concat(e,"&").concat(r))}},{key:"getSalesReport",value:function(t){return this.http.get("".concat(n.a.apiURL,"/bill/view/all?").concat(t))}},{key:"deleteBill",value:function(t){return this.http.get("".concat(n.a.apiURL,"/bill/").concat(t,"/delete"))}},{key:"editBill",value:function(t,e){return this.http.post("".concat(n.a.apiURL,"/bill/").concat(t,"/update"),e)}},{key:"getBillDetail",value:function(t){return this.http.get("".concat(n.a.apiURL,"/bill/").concat(t,"/getById"))}},{key:"getTotalSale",value:function(t){return this.http.get("".concat(n.a.apiURL,"/bill/total?").concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.gc(o.a))},t.\u0275prov=c.Sb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);