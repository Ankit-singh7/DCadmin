(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2WZm":function(e,t,c){"use strict";c.r(t);var s=c("ofXK"),n=c("3Pt+"),a=c("tyNb"),i=c("wd/R"),r=c("fXoL"),o=c("AytR"),l=c("tk/3");let d=(()=>{class e{constructor(e){this.http=e}getSessionList(e,t,c){return this.http.get(`${o.a.apiURL}/session/view/all?per_page=${e}&current_page=${t}&${c}`)}}return e.\u0275fac=function(t){return new(t||e)(r.gc(l.a))},e.\u0275prov=r.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=c("sumL"),h=c("rwBg"),b=c("AXIP"),g=c("oOf3");const p=["closeEditModal"];function f(e,t){if(1&e&&(r.ac(0),r.cc(1,"option",24),r.Mc(2),r.bc(),r.Zb()),2&e){const e=t.$implicit;r.Jb(1),r.vc("value",e.fullName),r.Jb(1),r.Nc(e.fullName)}}function m(e,t){if(1&e&&(r.cc(0,"tr"),r.cc(1,"td"),r.cc(2,"B"),r.Mc(3),r.pc(4,"date"),r.bc(),r.bc(),r.cc(5,"td"),r.Mc(6),r.bc(),r.cc(7,"td"),r.Mc(8),r.bc(),r.cc(9,"td"),r.Mc(10),r.bc(),r.cc(11,"td"),r.Mc(12),r.bc(),r.bc()),2&e){const e=t.$implicit;r.Jb(3),r.Nc(r.rc(4,5,e.createdOn,"MMM d, y, h:mm:ss a")),r.Jb(3),r.Nc(e.user_name),r.Jb(2),r.Oc("\u20b9 ",e.session_amount,""),r.Jb(2),r.Oc("\u20b9 ",e.drawer_balance,""),r.Jb(2),r.Oc("\u20b9 ",e.withdrawn,"")}}const w=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function v(e,t){if(1&e&&(r.cc(0,"tbody",25),r.Kc(1,m,13,8,"tr",7),r.pc(2,"paginate"),r.bc()),2&e){const e=r.oc();r.Jb(1),r.vc("ngForOf",r.rc(2,1,e.sessionList,r.Ac(4,w,e.selectedPerPage,e.currentpage,e.totalPage)))}}function M(e,t){if(1&e&&(r.cc(0,"tbody"),r.cc(1,"tr"),r.cc(2,"td",26),r.Mc(3),r.bc(),r.bc(),r.bc()),2&e){const e=r.oc();r.Jb(3),r.Nc(e.response)}}const O=[{path:"",component:(()=>{class e{constructor(e,t,c,s,n){this.router=e,this.sessionService=t,this.billService=c,this.userService=s,this.ui=n,this.name=[],this.sortOrder=!1,this.sortFields={user_name:!0,session_amount:!0,drawer_balance:!0,withdrawn:!0},this.fullName=localStorage.getItem("name"),this.sessionList=[],this.response="No Data to Show",this.userNameList=[],this.selectedPerPage=10,this.currentpage=1,this.getTotalSales=()=>{let e={startDate:i(new Date).format("DD-MM-YYYY"),endDate:i(new Date).format("DD-MM-YYYY")},t="";for(let c in e)e[c]&&(t=`${t}${c}=${e[c]}&`);console.log(t),this.billService.getTotalSale(t).subscribe(e=>{if(e.data){let t=e.data;this.total=0;for(let e of t)this.total=this.total+e.total;console.log(this.total)}else this.total=0})},this.onLimitSelect=e=>{this.selectedPerPage=e,this.getSessionList()},this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getSessionList(),this.getAllUsers(),this.getTotalSales()}addStatus(e){this.status=e,console.log(this.status)}editStatus(e){this.detail.status=e,console.log(this.status)}getAllUsers(){this.userService.getAllUsers(500,1).subscribe(e=>{this.userNameList.push({fullName:"ALL"});let t=e.data.result.map(e=>({fullName:`${e.firstName} ${e.lastName}`}));this.userNameList.push(...t),console.log(this.userNameList)})}getSessionList(e){e&&(this.currentpage=e);let t={createdOn:this.selectedDate,user_name:this.selectedUserName},c="";for(let s in t)t[s]&&(c=`${c}${s}=${t[s]}&`);console.log(c),this.ui.loader.show(),this.sessionService.getSessionList(this.selectedPerPage,this.currentpage,c).subscribe(e=>{e.data&&(this.sessionList=e.data.result.map(e=>Object.assign({date:i(e.createdOn).format("YYYY-MM-DD")},e)),this.totalPage=e.data.total),this.ui.loader.hide()},e=>this.ui.loader.hide())}onOptionSelect(e,t){"user"===e?this.selectedUserName="ALL"===t?"":t:"date"===e&&(this.selectedDate=t),this.getSessionList()}changeOrder(e){this.sortOrder=!this.sortOrder,this.field=e,this.sortFields[e]=this.sortOrder,this.sessionList.sort((t,c)=>"withdrawn"===e||"session_amount"===e||"drawer_balance"===e?this.sortOrder?c[e]-t[e]:t[e]-c[e]:this.sortOrder?c[e].localeCompare(t[e]):t[e].localeCompare(c[e]))}onUserSelect(e){this.selectedUserName=e,"CLEAR SEARCH"===this.selectedUserName&&(this.selectedUserName="")}changedDate(e){console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(a.e),r.Wb(d),r.Wb(u.a),r.Wb(h.a),r.Wb(b.a))},e.\u0275cmp=r.Qb({type:e,selectors:[["app-session"]],viewQuery:function(e,t){var c;1&e&&r.Rc(p,!0),2&e&&r.Cc(c=r.lc())&&(t.closeEditModal=c.first)},decls:56,vars:23,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-12"],[1,"form-group"],[2,"color","#69d73d"],[1,"col-sm-2","cus-srch"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday","placeholder","select Date","name","selectedDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"offset-md-5","col-sm-2","cus-srch"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],[3,"value"],[2,"width","100%"],["colspan","100%",1,"text-center"]],template:function(e,t){if(1&e&&(r.cc(0,"div",0),r.cc(1,"div",1),r.cc(2,"div",2),r.cc(3,"div",3),r.cc(4,"h4"),r.Mc(5,"TOTAL SALES : \u20b9 "),r.cc(6,"span",4),r.Mc(7),r.bc(),r.bc(),r.bc(),r.bc(),r.cc(8,"div",5),r.cc(9,"div",3),r.Mc(10," SESSION CREATED BY "),r.cc(11,"select",6),r.kc("ngModelChange",(function(e){return t.selectedUserName=e}))("change",(function(e){return t.onOptionSelect("user",e.target.value)})),r.Kc(12,f,3,2,"ng-container",7),r.bc(),r.bc(),r.bc(),r.cc(13,"div",8),r.cc(14,"div",3),r.Mc(15," SEARCH BY DATE "),r.cc(16,"input",9),r.kc("ngModelChange",(function(e){return t.selectedDate=e}))("change",(function(e){return t.onOptionSelect("date",e.target.value)})),r.bc(),r.bc(),r.bc(),r.cc(17,"div",10),r.cc(18,"div",3),r.Mc(19," SELECT PER PAGE "),r.cc(20,"select",11),r.kc("ngModelChange",(function(e){return t.selectedPerPage=e}))("change",(function(e){return t.onLimitSelect(e.target.value)})),r.cc(21,"option",12),r.Mc(22,"10"),r.bc(),r.cc(23,"option",13),r.Mc(24,"25"),r.bc(),r.cc(25,"option",14),r.Mc(26,"50"),r.bc(),r.cc(27,"option",15),r.Mc(28,"100"),r.bc(),r.bc(),r.bc(),r.bc(),r.cc(29,"div",2),r.cc(30,"div",16),r.cc(31,"table",17),r.cc(32,"thead"),r.cc(33,"tr"),r.cc(34,"th",18),r.Mc(35,"Date"),r.bc(),r.cc(36,"th",18),r.Mc(37,"User Name "),r.cc(38,"a",19),r.kc("click",(function(){return t.changeOrder("user_name")})),r.Xb(39,"i",20),r.bc(),r.bc(),r.cc(40,"th",18),r.Mc(41,"Open Balance "),r.cc(42,"a",19),r.kc("click",(function(){return t.changeOrder("session_amount")})),r.Xb(43,"i",20),r.bc(),r.bc(),r.cc(44,"th",18),r.Mc(45,"Closing Balance "),r.cc(46,"a",19),r.kc("click",(function(){return t.changeOrder("drawer_balance")})),r.Xb(47,"i",20),r.bc(),r.bc(),r.cc(48,"th",18),r.Mc(49,"Withraw "),r.cc(50,"a",19),r.kc("click",(function(){return t.changeOrder("withdrawn")})),r.Xb(51,"i",20),r.bc(),r.bc(),r.bc(),r.bc(),r.Kc(52,v,3,8,"tbody",21),r.Kc(53,M,4,1,"ng-template",null,22,r.Lc),r.bc(),r.cc(55,"pagination-controls",23),r.kc("pageChange",(function(e){return t.getSessionList(e)})),r.bc(),r.bc(),r.bc(),r.bc(),r.bc()),2&e){const e=r.Dc(54);r.Jb(7),r.Oc("",t.total,".00"),r.Jb(4),r.vc("ngModel",t.selectedUserName),r.Jb(1),r.vc("ngForOf",t.userNameList),r.Jb(4),r.vc("ngModel",t.selectedDate),r.Jb(4),r.vc("ngModel",t.selectedPerPage),r.Jb(19),r.Nb("fa-caret-down",t.sortFields.user_name)("fa-caret-up",!t.sortFields.user_name),r.Jb(4),r.Nb("fa-caret-down",t.sortFields.session_amount)("fa-caret-up",!t.sortFields.session_amount),r.Jb(4),r.Nb("fa-caret-down",t.sortFields.drawer_balance)("fa-caret-up",!t.sortFields.drawer_balance),r.Jb(4),r.Nb("fa-caret-down",t.sortFields.withdrawn)("fa-caret-up",!t.sortFields.withdrawn),r.Jb(1),r.vc("ngIf",null==t.sessionList?null:t.sessionList.length)("ngIfElse",e)}},directives:[n.q,n.h,n.k,s.k,n.b,n.l,n.s,s.l,g.c],pipes:[g.b,s.d],styles:["[_ngcontent-%COMP%]::-webkit-datetime-edit{padding:1em}[_ngcontent-%COMP%]::-webkit-datetime-edit-text{padding:0 .3em}[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{color:green}div.scrollmenu[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:inline-block;text-align:center;padding:14px;text-decoration:none;width:100%!important}"]}),e})()}];let S=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},imports:[[a.i.forChild(O)],a.i]}),e})();var L=c("wloI"),N=c("X+I5");c.d(t,"SessionModule",(function(){return P}));let P=(()=>{class e{}return e.\u0275mod=r.Ub({type:e}),e.\u0275inj=r.Tb({factory:function(t){return new(t||e)},providers:[N.a],imports:[[s.b,n.d,S,L.a,g.a]]}),e})()},"X+I5":function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var s=c("fXoL");let n=(()=>{class e{transform(e,t,c){return c?e.filter(e=>t.split(",").some(t=>e.hasOwnProperty(t)&&new RegExp(c,"gi").test(e[t]))):e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Vb({name:"filter",type:e,pure:!0}),e})()}}]);