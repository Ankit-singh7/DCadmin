function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"2WZm":function(e,t,c){"use strict";c.r(t);var n,r=c("ofXK"),a=c("3Pt+"),o=c("tyNb"),i=c("wd/R"),s=c("fXoL"),l=c("AytR"),u=c("tk/3"),d=((n=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"getSessionList",value:function(e,t,c){return this.http.get("".concat(l.a.apiURL,"/session/view/all?per_page=").concat(e,"&current_page=").concat(t,"&").concat(c))}}]),e}()).\u0275fac=function(e){return new(e||n)(s.gc(u.a))},n.\u0275prov=s.Sb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),b=c("sumL"),f=c("rwBg"),h=c("AXIP"),g=c("oOf3"),p=["closeEditModal"];function m(e,t){if(1&e&&(s.ac(0),s.cc(1,"option",23),s.Mc(2),s.bc(),s.Zb()),2&e){var c=t.$implicit;s.Jb(1),s.vc("value",c.fullName),s.Jb(1),s.Nc(c.fullName)}}function v(e,t){if(1&e&&(s.cc(0,"tr"),s.cc(1,"td"),s.cc(2,"B"),s.Mc(3),s.pc(4,"date"),s.bc(),s.bc(),s.cc(5,"td"),s.Mc(6),s.bc(),s.cc(7,"td"),s.Mc(8),s.bc(),s.cc(9,"td"),s.Mc(10),s.bc(),s.bc()),2&e){var c=t.$implicit;s.Jb(3),s.Nc(s.rc(4,4,c.createdOn,"MMM d, y, h:mm:ss a")),s.Jb(3),s.Nc(c.user_name),s.Jb(2),s.Oc("\u20b9 ",c.session_amount,""),s.Jb(2),s.Oc("\u20b9 ",c.withdrawn,"")}}var y=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function w(e,t){if(1&e&&(s.cc(0,"tbody",24),s.Kc(1,v,11,7,"tr",7),s.pc(2,"paginate"),s.bc()),2&e){var c=s.oc();s.Jb(1),s.vc("ngForOf",s.rc(2,1,c.sessionList,s.Ac(4,y,c.selectedPerPage,c.currentpage,c.totalPage)))}}function M(e,t){if(1&e&&(s.cc(0,"tbody"),s.cc(1,"tr"),s.cc(2,"td",25),s.Mc(3),s.bc(),s.bc(),s.bc()),2&e){var c=s.oc();s.Jb(3),s.Nc(c.response)}}var _,S,k=[{path:"",component:(_=function(){function e(t,c,n,r,a){var o=this;_classCallCheck(this,e),this.router=t,this.sessionService=c,this.billService=n,this.userService=r,this.ui=a,this.name=[],this.sortOrder=!1,this.sortFields={user_name:!0,session_amount:!0,withdrawn:!0},this.fullName=localStorage.getItem("name"),this.sessionList=[],this.response="No Data to Show",this.userNameList=[],this.selectedPerPage=10,this.currentpage=1,this.getTotalSales=function(){o.billService.getTotalSale().subscribe((function(e){o.total=e.data?e.data[0].total:0}))},this.onLimitSelect=function(e){o.selectedPerPage=e,o.getSessionList()},this.logout=function(){localStorage.setItem("isLoggedIn",String(!1)),o.router.navigate(["/login"])}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getSessionList(),this.getAllUsers(),this.getTotalSales()}},{key:"addStatus",value:function(e){this.status=e,console.log(this.status)}},{key:"editStatus",value:function(e){this.detail.status=e,console.log(this.status)}},{key:"getAllUsers",value:function(){var e=this;this.userService.getAllUsers(500,1).subscribe((function(t){var c;e.userNameList.push({fullName:"ALL"});var n=t.data.result.map((function(e){return{fullName:"".concat(e.firstName," ").concat(e.lastName)}}));(c=e.userNameList).push.apply(c,_toConsumableArray(n)),console.log(e.userNameList)}))}},{key:"getSessionList",value:function(e){var t=this;e&&(this.currentpage=e);var c={createdOn:this.selectedDate,user_name:this.selectedUserName},n="";for(var r in c)c[r]&&(n="".concat(n).concat(r,"=").concat(c[r],"&"));console.log(n),this.ui.loader.show(),this.sessionService.getSessionList(this.selectedPerPage,this.currentpage,n).subscribe((function(e){e.data&&(t.sessionList=e.data.result.map((function(e){return Object.assign({date:i(e.createdOn).format("YYYY-MM-DD")},e)})),t.totalPage=e.data.total),t.ui.loader.hide()}),(function(e){return t.ui.loader.hide()}))}},{key:"onOptionSelect",value:function(e,t){"user"===e?this.selectedUserName="ALL"===t?"":t:"date"===e&&(this.selectedDate=t),this.getSessionList()}},{key:"changeOrder",value:function(e){var t=this;this.sortOrder=!this.sortOrder,this.field=e,this.sortFields[e]=this.sortOrder,this.sessionList.sort((function(c,n){return"withdrawn"===e||"session_amount"===e?t.sortOrder?n[e]-c[e]:c[e]-n[e]:t.sortOrder?n[e].localeCompare(c[e]):c[e].localeCompare(n[e])}))}},{key:"onUserSelect",value:function(e){this.selectedUserName=e,"CLEAR SEARCH"===this.selectedUserName&&(this.selectedUserName="")}},{key:"changedDate",value:function(e){console.log(e)}}]),e}(),_.\u0275fac=function(e){return new(e||_)(s.Wb(o.e),s.Wb(d),s.Wb(b.a),s.Wb(f.a),s.Wb(h.a))},_.\u0275cmp=s.Qb({type:_,selectors:[["app-session"]],viewQuery:function(e,t){var c;1&e&&s.Rc(p,!0),2&e&&s.Cc(c=s.lc())&&(t.closeEditModal=c.first)},decls:52,vars:19,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-12"],[1,"form-group"],[2,"color","#69d73d"],[1,"col-sm-2","cus-srch"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday","placeholder","select Date","name","selectedDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],[3,"value"],[2,"width","100%"],["colspan","100%",1,"text-center"]],template:function(e,t){if(1&e&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.cc(4,"h4"),s.Mc(5,"TOTAL SALES : \u20b9 "),s.cc(6,"span",4),s.Mc(7),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(8,"div",5),s.cc(9,"div",3),s.Mc(10," SESSION CREATED BY "),s.cc(11,"select",6),s.kc("ngModelChange",(function(e){return t.selectedUserName=e}))("change",(function(e){return t.onOptionSelect("user",e.target.value)})),s.Kc(12,m,3,2,"ng-container",7),s.bc(),s.bc(),s.bc(),s.cc(13,"div",8),s.cc(14,"div",3),s.Mc(15," SEARCH BY DATE "),s.cc(16,"input",9),s.kc("ngModelChange",(function(e){return t.selectedDate=e}))("change",(function(e){return t.onOptionSelect("date",e.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(17,"div",8),s.cc(18,"div",3),s.Mc(19," SELECT PER PAGE "),s.cc(20,"select",10),s.kc("ngModelChange",(function(e){return t.selectedPerPage=e}))("change",(function(e){return t.onLimitSelect(e.target.value)})),s.cc(21,"option",11),s.Mc(22,"10"),s.bc(),s.cc(23,"option",12),s.Mc(24,"25"),s.bc(),s.cc(25,"option",13),s.Mc(26,"50"),s.bc(),s.cc(27,"option",14),s.Mc(28,"100"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(29,"div",2),s.cc(30,"div",15),s.cc(31,"table",16),s.cc(32,"thead"),s.cc(33,"tr"),s.cc(34,"th",17),s.Mc(35,"Date"),s.bc(),s.cc(36,"th",17),s.Mc(37,"User Name "),s.cc(38,"a",18),s.kc("click",(function(){return t.changeOrder("user_name")})),s.Xb(39,"i",19),s.bc(),s.bc(),s.cc(40,"th",17),s.Mc(41,"Open Balance "),s.cc(42,"a",18),s.kc("click",(function(){return t.changeOrder("session_amount")})),s.Xb(43,"i",19),s.bc(),s.bc(),s.cc(44,"th",17),s.Mc(45,"Withraw "),s.cc(46,"a",18),s.kc("click",(function(){return t.changeOrder("withdrawn")})),s.Xb(47,"i",19),s.bc(),s.bc(),s.bc(),s.bc(),s.Kc(48,w,3,8,"tbody",20),s.Kc(49,M,4,1,"ng-template",null,21,s.Lc),s.bc(),s.cc(51,"pagination-controls",22),s.kc("pageChange",(function(e){return t.getSessionList(e)})),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&e){var c=s.Dc(50);s.Jb(7),s.Oc("",t.total,".00"),s.Jb(4),s.vc("ngModel",t.selectedUserName),s.Jb(1),s.vc("ngForOf",t.userNameList),s.Jb(4),s.vc("ngModel",t.selectedDate),s.Jb(4),s.vc("ngModel",t.selectedPerPage),s.Jb(19),s.Nb("fa-caret-down",t.sortFields.user_name)("fa-caret-up",!t.sortFields.user_name),s.Jb(4),s.Nb("fa-caret-down",t.sortFields.session_amount)("fa-caret-up",!t.sortFields.session_amount),s.Jb(4),s.Nb("fa-caret-down",t.sortFields.withdrawn)("fa-caret-up",!t.sortFields.withdrawn),s.Jb(1),s.vc("ngIf",null==t.sessionList?null:t.sessionList.length)("ngIfElse",c)}},directives:[a.p,a.g,a.j,r.k,a.b,a.k,a.r,r.l,g.c],pipes:[g.b,r.d],styles:["[_ngcontent-%COMP%]::-webkit-datetime-edit{padding:1em}[_ngcontent-%COMP%]::-webkit-datetime-edit-text{padding:0 .3em}[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{color:green}div.scrollmenu[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:inline-block;text-align:center;padding:14px;text-decoration:none;width:100%!important}"]}),_)}],C=((S=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ub({type:S}),S.\u0275inj=s.Tb({factory:function(e){return new(e||S)},imports:[[o.i.forChild(k)],o.i]}),S),O=c("wloI"),L=c("X+I5");c.d(t,"SessionModule",(function(){return P}));var A,P=((A=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ub({type:A}),A.\u0275inj=s.Tb({factory:function(e){return new(e||A)},providers:[L.a],imports:[[r.b,a.c,C,O.a,g.a]]}),A)}}]);