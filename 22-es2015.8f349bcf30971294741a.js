(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{gvMv:function(t,e,c){"use strict";c.r(e);var o=c("ofXK"),n=c("tyNb"),r=c("wd/R"),i=c("PSD3"),a=c.n(i),s=c("fXoL"),l=c("pVIR"),d=c("AXIP"),g=c("3Pt+"),h=c("oOf3");const u=["closeEditModal"];function f(t,e){if(1&t&&(s.ac(0),s.cc(1,"td"),s.cc(2,"B"),s.Mc(3),s.pc(4,"titlecase"),s.bc(),s.bc(),s.cc(5,"td"),s.Mc(6),s.bc(),s.Zb()),2&t){const t=s.oc().$implicit;s.Jb(3),s.Nc(s.qc(4,2,t.food_name)),s.Jb(3),s.Nc(t.quantity)}}function b(t,e){if(1&t&&(s.cc(0,"tr"),s.Kc(1,f,7,4,"ng-container",26),s.bc()),2&t){const t=e.$implicit;s.Jb(1),s.vc("ngIf",t.quantity>0)}}const p=function(t,e,c){return{itemsPerPage:t,currentPage:e,totalItems:c}};function m(t,e){if(1&t&&(s.cc(0,"tbody",24),s.Kc(1,b,2,1,"tr",25),s.pc(2,"paginate"),s.bc()),2&t){const t=s.oc();s.Jb(1),s.vc("ngForOf",s.rc(2,1,t.reportList,s.Ac(4,p,t.selectedPerPage,t.currentpage,t.totalPage)))}}function v(t,e){if(1&t&&(s.cc(0,"tbody"),s.cc(1,"tr"),s.cc(2,"td",27),s.Mc(3),s.bc(),s.bc(),s.bc()),2&t){const t=s.oc();s.Jb(3),s.Nc(t.response)}}const D=[{path:"",component:(()=>{class t{constructor(t,e,c){this.router=t,this.foodService=e,this.ui=c,this.name=[],this.sortOrder=!1,this.sortFields={quantity:!0,food_name:!0},this.reportList=[],this.response="No Data to Show",this.selectedPerPage=10,this.currentpage=1,this.onLimitSelect=t=>{this.selectedPerPage=t,this.getAllReport()},this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getAllReport()}getAllReport(t){t&&(this.currentpage=t);let e={startDate:r(this.selectedStartDate).format("DD-MM-YYYY"),endDate:r(this.selectedEndDate).format("DD-MM-YYYY")},c="";for(let o in e)e[o]&&(c=`${c}${o}=${e[o]}&`);this.ui.loader.show(),this.foodService.getAllSalesReport(this.selectedPerPage,this.currentpage,c).subscribe(t=>{if(this.reportList=[],t.data){let e=JSON.parse(JSON.stringify(t.data.result)),c=e.map(t=>t.ingredient_id);console.log(c);for(let t=0;t<e.length;t++){let c=e.filter(c=>c.food_id===e[t].food_id);if(console.log(c),c.length>1){let t=JSON.parse(JSON.stringify(c[0])),e=0;for(let o=0;o<c.length;o++)e+=c[o].quantity;t.quantity=e,this.reportList.some(e=>e.food_id===t.food_id)||this.reportList.push(Object.assign({},t))}else this.reportList.push(c[0])}this.totalPage=this.reportList.length,console.log(this.reportList)}this.ui.loader.hide()},t=>{this.ui.loader.hide()})}onDateSelect(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():a.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):a.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}changeOrder(t){this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((e,c)=>"quantity"===t||"quantity"===t?this.sortOrder?c[t]-e[t]:e[t]-c[t]:this.sortOrder?c[t].localeCompare(e[t]):e[t].localeCompare(c[t]))}changedDate(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(n.e),s.Wb(l.a),s.Wb(d.a))},t.\u0275cmp=s.Qb({type:t,selectors:[["app-sales-report"]],viewQuery:function(t,e){var c;1&t&&s.Rc(u,!0),2&t&&s.Cc(c=s.lc())&&(e.closeEditModal=c.first)},decls:44,vars:13,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-3","cus-srch"],[1,"form-group"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"offset-md-1","col-sm-2","cus-srch"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],[2,"width","100%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(s.cc(0,"div",0),s.cc(1,"div",1),s.cc(2,"div",2),s.cc(3,"div",3),s.Mc(4," FROM DATE "),s.cc(5,"input",4),s.kc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(6,"div",2),s.cc(7,"div",3),s.Mc(8," TO DATE "),s.cc(9,"input",5),s.kc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),s.bc(),s.bc(),s.bc(),s.cc(10,"div",6),s.cc(11,"div",7),s.cc(12,"button",8),s.kc("click",(function(){return e.onDateSelect()})),s.cc(13,"b"),s.Mc(14,"SEARCH"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(15,"div",9),s.cc(16,"div",3),s.Mc(17," SELECT PER PAGE "),s.cc(18,"select",10),s.kc("ngModelChange",(function(t){return e.selectedPerPage=t}))("change",(function(t){return e.onLimitSelect(t.target.value)})),s.cc(19,"option",11),s.Mc(20,"10"),s.bc(),s.cc(21,"option",12),s.Mc(22,"25"),s.bc(),s.cc(23,"option",13),s.Mc(24,"50"),s.bc(),s.cc(25,"option",14),s.Mc(26,"100"),s.bc(),s.bc(),s.bc(),s.bc(),s.cc(27,"div",15),s.cc(28,"div",16),s.cc(29,"table",17),s.cc(30,"thead"),s.cc(31,"tr"),s.cc(32,"th",18),s.Mc(33,"Product Name"),s.cc(34,"a",19),s.kc("click",(function(){return e.changeOrder("food_name")})),s.Xb(35,"i",20),s.bc(),s.bc(),s.cc(36,"th",18),s.Mc(37,"Quantity Sold"),s.cc(38,"a",19),s.kc("click",(function(){return e.changeOrder("quantity")})),s.Xb(39,"i",20),s.bc(),s.bc(),s.bc(),s.bc(),s.Kc(40,m,3,8,"tbody",21),s.Kc(41,v,4,1,"ng-template",null,22,s.Lc),s.bc(),s.cc(43,"pagination-controls",23),s.kc("pageChange",(function(t){return e.getAllReport(t)})),s.bc(),s.bc(),s.bc(),s.bc(),s.bc()),2&t){const t=s.Dc(42);s.Jb(5),s.vc("ngModel",e.selectedStartDate),s.Jb(4),s.vc("ngModel",e.selectedEndDate),s.Jb(9),s.vc("ngModel",e.selectedPerPage),s.Jb(17),s.Nb("fa-caret-down",e.sortFields.food_name)("fa-caret-up",!e.sortFields.food_name),s.Jb(4),s.Nb("fa-caret-down",e.sortFields.quantity)("fa-caret-up",!e.sortFields.quantity),s.Jb(1),s.vc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",t)}},directives:[g.b,g.j,g.m,g.s,g.n,g.u,o.l,h.c,o.k],pipes:[h.b,o.r],styles:[""]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(D)],n.i]}),t})();c.d(e,"SalesReportModule",(function(){return y}));let y=(()=>{class t{}return t.\u0275mod=s.Ub({type:t}),t.\u0275inj=s.Tb({factory:function(e){return new(e||t)},imports:[[o.b,g.f,M,h.a]]}),t})()}}]);