(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{sUg5:function(t,e,i){"use strict";i.r(e);var r=i("ofXK"),n=i("tyNb"),o=i("wd/R"),s=i("PSD3"),c=i.n(s),a=i("fXoL"),d=i("pVIR"),l=i("AXIP"),b=i("3Pt+");const u=["closeEditModal"];function h(t,e){if(1&t&&(a.Ub(0,"tr"),a.Ub(1,"td"),a.Ub(2,"B"),a.Ec(3),a.hc(4,"titlecase"),a.Tb(),a.Tb(),a.Ub(5,"td"),a.Ec(6),a.hc(7,"titlecase"),a.Tb(),a.Ub(8,"td"),a.Ec(9),a.Tb(),a.Ub(10,"td"),a.Ec(11),a.Tb(),a.Tb()),2&t){const t=e.$implicit;a.Bb(3),a.Fc(a.ic(4,6,t.ingredient)),a.Bb(3),a.Fc(a.ic(7,8,t.category)),a.Bb(3),a.Hc("",t.quantity_by_stock,"(",t.unit,")"),a.Bb(2),a.Hc("",t.quantity_by_order,"(",t.unit,")")}}function g(t,e){if(1&t&&(a.Ub(0,"tbody",17),a.Cc(1,h,12,10,"tr",18),a.Tb()),2&t){const t=a.gc();a.Bb(1),a.nc("ngForOf",t.reportList)}}function f(t,e){if(1&t&&(a.Ub(0,"tbody"),a.Ub(1,"tr"),a.Ub(2,"td",19),a.Ec(3),a.Tb(),a.Tb(),a.Tb()),2&t){const t=a.gc();a.Bb(3),a.Fc(t.response)}}const p=[{path:"",component:(()=>{class t{constructor(t,e,i){this.router=t,this.foodService=e,this.ui=i,this.name=[],this.sortOrder=!1,this.sortFields={ingredient:!0,category:!0,quantity_by_stock:!0,quantity_by_order:!0},this.reportList=[],this.response="No Data to Show",this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getAllReport()}getAllReport(){this.ui.loader.show(),this.foodService.getAllReport().subscribe(t=>{if(this.reportList=[],t.data){let e=JSON.parse(JSON.stringify(t.data)),i=e.map(t=>t.ingredient_id);console.log(i);for(let t=0;t<e.length;t++){let i=e.filter(i=>i.ingredient_id===e[t].ingredient_id);if(console.log(i),i.length>1){let t=JSON.parse(JSON.stringify(i[0])),e=0,r=0;for(let n=0;n<i.length;n++)e+=i[n].quantity_by_order,r+=i[n].quantity_by_stock;t.quantity_by_order=e,t.quantity_by_stock=r,this.reportList.some(e=>e.ingredient_id===t.ingredient_id)||this.reportList.push(Object.assign({},t))}else this.reportList.push(i[0])}}this.ui.loader.hide()},t=>{this.ui.loader.hide()})}onDateSelect(){void 0===this.selectedStartDate?c.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500}):void 0===this.selectedEndDate?c.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):(this.ui.loader.show(),this.foodService.getReportByDate(o(this.selectedStartDate).format("DD-MM-YYYY"),o(this.selectedEndDate).format("DD-MM-YYYY")).subscribe(t=>{if(this.reportList=[],t.data){let e=JSON.parse(JSON.stringify(t.data)),i=e.map(t=>t.ingredient_id);console.log(i);for(let t=0;t<e.length;t++){let i=e.filter(i=>i.ingredient_id===e[t].ingredient_id);if(console.log(i),i.length>1){let t=JSON.parse(JSON.stringify(i[0])),e=0,r=0;for(let n=0;n<i.length;n++)e+=i[n].quantity_by_order,r+=i[n].quantity_by_stock;t.quantity_by_order=e,t.quantity_by_stock=r,this.reportList.some(e=>e.ingredient_id===t.ingredient_id)||this.reportList.push(Object.assign({},t))}else this.reportList.push(i[0])}}this.ui.loader.hide()},t=>{this.ui.loader.hide()}))}changeOrder(t){this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((e,i)=>"quantity_by_order"===t||"quantity_by_stock"===t?this.sortOrder?i[t]-e[t]:e[t]-i[t]:this.sortOrder?i[t].localeCompare(e[t]):e[t].localeCompare(i[t]))}changedDate(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(n.e),a.Ob(d.a),a.Ob(l.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-ingredient-report"]],viewQuery:function(t,e){var i;1&t&&a.Jc(u,!0),2&t&&a.uc(i=a.dc())&&(e.closeEditModal=i.first)},decls:39,vars:20,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-sm-3","cus-srch"],[1,"form-group"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.Ub(2,"div",2),a.Ub(3,"div",3),a.Ec(4," FROM DATE "),a.Ub(5,"input",4),a.cc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),a.Tb(),a.Tb(),a.Tb(),a.Ub(6,"div",2),a.Ub(7,"div",3),a.Ec(8," TO DATE "),a.Ub(9,"input",5),a.cc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),a.Tb(),a.Tb(),a.Tb(),a.Ub(10,"div",6),a.Ub(11,"div",7),a.Ub(12,"button",8),a.cc("click",(function(){return e.onDateSelect()})),a.Ub(13,"b"),a.Ec(14,"SEARCH"),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Ub(15,"div",9),a.Ub(16,"div",10),a.Ub(17,"table",11),a.Ub(18,"thead"),a.Ub(19,"tr"),a.Ub(20,"th",12),a.Ec(21,"Ingredient Name"),a.Ub(22,"a",13),a.cc("click",(function(){return e.changeOrder("ingredient")})),a.Pb(23,"i",14),a.Tb(),a.Tb(),a.Ub(24,"th",12),a.Ec(25,"Category"),a.Ub(26,"a",13),a.cc("click",(function(){return e.changeOrder("category")})),a.Pb(27,"i",14),a.Tb(),a.Tb(),a.Ub(28,"th",12),a.Ec(29,"Stock out (By Stock Manager)"),a.Ub(30,"a",13),a.cc("click",(function(){return e.changeOrder("quantity_by_stock")})),a.Pb(31,"i",14),a.Tb(),a.Tb(),a.Ub(32,"th",12),a.Ec(33,"Stock out (By Order)"),a.Ub(34,"a",13),a.cc("click",(function(){return e.changeOrder("quantity_by_order")})),a.Pb(35,"i",14),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Cc(36,g,2,1,"tbody",15),a.Cc(37,f,4,1,"ng-template",null,16,a.Dc),a.Tb(),a.Tb(),a.Tb(),a.Tb(),a.Tb()),2&t){const t=a.vc(38);a.Bb(5),a.nc("ngModel",e.selectedStartDate),a.Bb(4),a.nc("ngModel",e.selectedEndDate),a.Bb(14),a.Fb("fa-caret-down",e.sortFields.ingredient)("fa-caret-up",!e.sortFields.ingredient),a.Bb(4),a.Fb("fa-caret-down",e.sortFields.category)("fa-caret-up",!e.sortFields.category),a.Bb(4),a.Fb("fa-caret-down",e.sortFields.quantity_by_stock)("fa-caret-up",!e.sortFields.quantity_by_stock),a.Bb(4),a.Fb("fa-caret-down",e.sortFields.quantity_by_order)("fa-caret-up",!e.sortFields.quantity_by_order),a.Bb(1),a.nc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",t)}},directives:[b.b,b.g,b.j,r.k,r.j],pipes:[r.q],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(p)],n.i]}),t})();i.d(e,"IngredientReportModule",(function(){return _}));let _=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[r.b,y,b.c]]}),t})()}}]);