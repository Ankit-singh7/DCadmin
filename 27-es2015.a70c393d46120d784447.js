(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{gvMv:function(t,e,c){"use strict";c.r(e);var o=c("ofXK"),i=c("tyNb"),r=c("wd/R"),n=c("PSD3"),s=c.n(n),a=c("fXoL"),l=c("pVIR"),d=c("sumL"),h=c("AXIP"),b=c("3Pt+");const u=["closeEditModal"];function f(t,e){if(1&t&&(a.ac(0),a.cc(1,"td"),a.cc(2,"B"),a.Mc(3),a.pc(4,"titlecase"),a.bc(),a.bc(),a.cc(5,"td"),a.Mc(6),a.bc(),a.Zb()),2&t){const t=a.oc().$implicit;a.Jb(3),a.Nc(a.qc(4,2,t.food_name)),a.Jb(3),a.Nc(t.quantity)}}function p(t,e){if(1&t&&(a.cc(0,"tr"),a.Kc(1,f,7,4,"ng-container",21),a.bc()),2&t){const t=e.$implicit;a.Jb(1),a.vc("ngIf",t.quantity>0)}}function g(t,e){if(1&t&&(a.cc(0,"tbody",19),a.Kc(1,p,2,1,"tr",20),a.bc()),2&t){const t=a.oc();a.Jb(1),a.vc("ngForOf",t.reportList)}}function m(t,e){if(1&t&&(a.cc(0,"tbody"),a.cc(1,"tr"),a.cc(2,"td",22),a.Mc(3),a.bc(),a.bc(),a.bc()),2&t){const t=a.oc();a.Jb(3),a.Nc(t.response)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,c,o){this.router=t,this.foodService=e,this.billService=c,this.ui=o,this.name=[],this.sortOrder=!1,this.sortFields={quantity:!0,food_name:!0},this.reportList=[],this.response="No Data to Show",this.selectedPerPage=1e4,this.currentpage=1,this.onLimitSelect=t=>{this.selectedPerPage=t,this.getAllReport()},this.logout=()=>{localStorage.setItem("isLoggedIn",String(!1)),this.router.navigate(["/login"])}}ngOnInit(){this.getAllReport()}getAllReport(){let t={startDate:r(this.selectedStartDate).format("DD-MM-YYYY"),endDate:r(this.selectedEndDate).format("DD-MM-YYYY")},e="";for(let c in t)t[c]&&(e=`${e}${c}=${t[c]}&`);this.ui.loader.show(),this.billService.getBillingList(this.selectedPerPage,this.currentpage,e).subscribe(t=>{if(this.reportList=[],t.data){let e=JSON.parse(JSON.stringify(t.data.result)),c=[];for(let t of e)for(let e of t.products)c.push(e);c.map(t=>t.food_id);for(let t=0;t<c.length;t++){let e=c.filter(e=>e.food_id===c[t].food_id);if(console.log(e),e.length>1){let t=JSON.parse(JSON.stringify(e[0])),c=0;for(let o=0;o<e.length;o++)c+=e[o].quantity;t.quantity=c,this.reportList.some(e=>e.food_id===t.food_id)||this.reportList.push(Object.assign({},t))}else this.reportList.push(e[0])}this.total=parseInt(t.data.total.split("-")[0]).toFixed(2),console.log(this.reportList)}this.ui.loader.hide()},t=>{this.ui.loader.hide()})}onDateSelect(){this.selectedStartDate?this.selectedEndDate?this.getAllReport():s.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):s.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}changeOrder(t){this.sortOrder=!this.sortOrder,this.field=t,this.sortFields[t]=this.sortOrder,this.reportList.sort((e,c)=>"quantity"===t||"quantity"===t?this.sortOrder?c[t]-e[t]:e[t]-c[t]:this.sortOrder?c[t].localeCompare(e[t]):e[t].localeCompare(c[t]))}changedDate(t,e){"start"===t?this.selectedStartDate=e:"end"===t&&(this.selectedEndDate=e),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(i.e),a.Wb(l.a),a.Wb(d.a),a.Wb(h.a))},t.\u0275cmp=a.Qb({type:t,selectors:[["app-sales-report"]],viewQuery:function(t,e){var c;1&t&&a.Rc(u,!0),2&t&&a.Cc(c=a.lc())&&(e.closeEditModal=c.first)},decls:38,vars:13,consts:[[1,"container-fluid"],[1,"row","dash-tab"],[1,"col-md-12","col-sm-12"],[1,"form-group"],[2,"color","#69d73d"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","details_table"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],["style","width:100%",4,"ngIf","ngIfElse"],["elseBlock",""],[2,"width","100%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","100%",1,"text-center"]],template:function(t,e){if(1&t&&(a.cc(0,"div",0),a.cc(1,"div",1),a.cc(2,"div",2),a.cc(3,"div",3),a.cc(4,"h4"),a.Mc(5,"TOTAL SALES : \u20b9 "),a.cc(6,"span",4),a.Mc(7),a.bc(),a.bc(),a.bc(),a.bc(),a.Xb(8,"br"),a.cc(9,"div",5),a.cc(10,"div",3),a.Mc(11," FROM DATE "),a.cc(12,"input",6),a.kc("ngModelChange",(function(t){return e.selectedStartDate=t}))("change",(function(t){return e.changedDate("start",t.target.value)})),a.bc(),a.bc(),a.bc(),a.cc(13,"div",5),a.cc(14,"div",3),a.Mc(15," TO DATE "),a.cc(16,"input",7),a.kc("ngModelChange",(function(t){return e.selectedEndDate=t}))("change",(function(t){return e.changedDate("end",t.target.value)})),a.bc(),a.bc(),a.bc(),a.cc(17,"div",8),a.cc(18,"div",9),a.cc(19,"button",10),a.kc("click",(function(){return e.onDateSelect()})),a.cc(20,"b"),a.Mc(21,"SEARCH"),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(22,"div",11),a.cc(23,"div",12),a.cc(24,"table",13),a.cc(25,"thead"),a.cc(26,"tr"),a.cc(27,"th",14),a.Mc(28,"Product Name"),a.cc(29,"a",15),a.kc("click",(function(){return e.changeOrder("food_name")})),a.Xb(30,"i",16),a.bc(),a.bc(),a.cc(31,"th",14),a.Mc(32,"Quantity Sold"),a.cc(33,"a",15),a.kc("click",(function(){return e.changeOrder("quantity")})),a.Xb(34,"i",16),a.bc(),a.bc(),a.bc(),a.bc(),a.Kc(35,g,2,1,"tbody",17),a.Kc(36,m,4,1,"ng-template",null,18,a.Lc),a.bc(),a.bc(),a.bc(),a.bc(),a.bc()),2&t){const t=a.Dc(37);a.Jb(7),a.Nc(e.total),a.Jb(5),a.vc("ngModel",e.selectedStartDate),a.Jb(4),a.vc("ngModel",e.selectedEndDate),a.Jb(14),a.Nb("fa-caret-down",e.sortFields.food_name)("fa-caret-up",!e.sortFields.food_name),a.Jb(4),a.Nb("fa-caret-down",e.sortFields.quantity)("fa-caret-up",!e.sortFields.quantity),a.Jb(1),a.vc("ngIf",null==e.reportList?null:e.reportList.length)("ngIfElse",t)}},directives:[b.b,b.h,b.k,o.l,o.k],pipes:[o.r],styles:[""]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=a.Ub({type:t}),t.\u0275inj=a.Tb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(v)],i.i]}),t})();var y=c("oOf3");c.d(e,"SalesReportModule",(function(){return S}));let S=(()=>{class t{}return t.\u0275mod=a.Ub({type:t}),t.\u0275inj=a.Tb({factory:function(e){return new(e||t)},imports:[[o.b,b.d,D,y.a]]}),t})()}}]);