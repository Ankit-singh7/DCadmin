(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"49bs":function(e,t,c){"use strict";c.r(t);var i=c("ofXK"),n=c("3Pt+"),l=c("tyNb"),a=c("PSD3"),o=c.n(a),s=c("wd/R"),d=c("fXoL"),r=c("sumL"),b=c("rwBg"),h=c("wZvz"),u=c("f4UJ"),m=c("AXIP"),p=c("oOf3");const g=["closeEditModal"];function f(e,t){if(1&e&&(d.ac(0),d.cc(1,"option",30),d.Mc(2),d.bc(),d.Zb()),2&e){const e=t.$implicit;d.Jb(1),d.vc("value",e.id),d.Jb(1),d.Nc(e.name)}}function v(e,t){if(1&e&&(d.ac(0),d.cc(1,"option",30),d.Mc(2),d.bc(),d.Zb()),2&e){const e=t.$implicit;d.Jb(1),d.vc("value",e.id),d.Jb(1),d.Nc(e.name)}}function M(e,t){if(1&e&&(d.ac(0),d.cc(1,"option",30),d.Mc(2),d.bc(),d.Zb()),2&e){const e=t.$implicit;d.Jb(1),d.vc("value",e.fullName),d.Jb(1),d.Nc(e.fullName)}}function y(e,t){1&e&&(d.ac(0),d.cc(1,"th",20),d.Mc(2,"Action"),d.bc(),d.Zb())}function w(e,t){1&e&&(d.ac(0),d.cc(1,"th",20),d.Mc(2,"View"),d.bc(),d.Zb())}function D(e,t){if(1&e){const e=d.dc();d.ac(0),d.cc(1,"td"),d.cc(2,"button",32),d.kc("click",(function(){d.Fc(e);const t=d.oc(2).$implicit;return d.oc(2).printBill(t)})),d.Xb(3,"i",33),d.bc(),d.bc(),d.Zb()}}function _(e,t){if(1&e){const e=d.dc();d.cc(0,"td"),d.cc(1,"button",34),d.kc("click",(function(){d.Fc(e);const t=d.oc(2).$implicit;return d.oc(2).printBill(t)})),d.Xb(2,"i",33),d.bc(),d.bc()}}function N(e,t){if(1&e&&(d.ac(0),d.Kc(1,D,4,0,"ng-container",23),d.Kc(2,_,3,0,"ng-template",null,31,d.Lc),d.Zb()),2&e){const e=d.Dc(3),t=d.oc().$implicit;d.Jb(1),d.vc("ngIf","No"===(null==t?null:t.printed))("ngIfElse",e)}}function k(e,t){if(1&e){const e=d.dc();d.ac(0),d.cc(1,"td"),d.cc(2,"button",35),d.kc("click",(function(){d.Fc(e);const t=d.oc().$implicit;return d.oc(2).getBillDetail(t.bill_id)})),d.Xb(3,"i",36),d.bc(),d.bc(),d.Zb()}}function L(e,t){if(1&e&&(d.cc(0,"tr"),d.Kc(1,N,4,2,"ng-container",19),d.Kc(2,k,4,0,"ng-container",19),d.cc(3,"td"),d.Mc(4),d.bc(),d.cc(5,"td"),d.Mc(6),d.bc(),d.bc()),2&e){const e=t.$implicit,c=d.oc(2);d.Jb(1),d.vc("ngIf","operator"===c.role),d.Jb(1),d.vc("ngIf","operator"===c.role),d.Jb(2),d.Nc(e.user_name),d.Jb(2),d.Oc("\u20b9 ",e.total_price,"")}}const B=function(e,t,c){return{itemsPerPage:e,currentPage:t,totalItems:c}};function P(e,t){if(1&e&&(d.cc(0,"tbody"),d.Kc(1,L,7,4,"tr",7),d.pc(2,"paginate"),d.bc()),2&e){const e=d.oc();d.Jb(1),d.vc("ngForOf",d.rc(2,1,e.billList,d.Ac(4,B,e.selectedPerPage,e.currentpage,e.totalPage)))}}function S(e,t){if(1&e&&(d.cc(0,"tbody"),d.cc(1,"tr"),d.cc(2,"td",37),d.Mc(3),d.bc(),d.bc(),d.bc()),2&e){const e=d.oc();d.Jb(3),d.Nc(e.response)}}function J(e,t){if(1&e&&(d.ac(0),d.cc(1,"div",41),d.cc(2,"p"),d.cc(3,"span",42),d.cc(4,"span",44),d.Mc(5),d.bc(),d.Mc(6),d.pc(7,"titlecase"),d.bc(),d.bc(),d.bc(),d.Zb()),2&e){const e=t.$implicit;d.Jb(5),d.Nc(e.quantity),d.Jb(1),d.Oc(" X ",d.qc(7,2,e.food_name),"")}}function O(e,t){if(1&e&&(d.cc(0,"div",38),d.cc(1,"div",39),d.cc(2,"div",40),d.cc(3,"h5"),d.Mc(4,"Billing Detail"),d.bc(),d.bc(),d.cc(5,"div",41),d.cc(6,"p"),d.Mc(7,"Date: "),d.cc(8,"span",42),d.Mc(9),d.bc(),d.bc(),d.bc(),d.cc(10,"div",41),d.cc(11,"p"),d.Mc(12,"Name: "),d.cc(13,"span",42),d.Mc(14),d.bc(),d.bc(),d.bc(),d.cc(15,"div",41),d.cc(16,"p"),d.Mc(17,"Bill ID: "),d.cc(18,"span",42),d.Mc(19),d.bc(),d.bc(),d.bc(),d.cc(20,"div",41),d.cc(21,"p"),d.Mc(22,"Phone No: "),d.cc(23,"span",42),d.Mc(24),d.bc(),d.bc(),d.bc(),d.cc(25,"div",41),d.cc(26,"p"),d.Mc(27,"Whatsapp No: "),d.cc(28,"span",42),d.Mc(29),d.bc(),d.bc(),d.bc(),d.cc(30,"div",16),d.cc(31,"p"),d.Mc(32,"Address: "),d.cc(33,"span",42),d.Mc(34),d.bc(),d.bc(),d.bc(),d.cc(35,"div",41),d.cc(36,"p"),d.Mc(37,"Delivery Mode: "),d.cc(38,"span",42),d.Mc(39),d.bc(),d.bc(),d.bc(),d.cc(40,"div",41),d.cc(41,"p"),d.Mc(42,"Payment Mode: "),d.cc(43,"span",42),d.Mc(44),d.bc(),d.bc(),d.bc(),d.bc(),d.cc(45,"div",39),d.cc(46,"div",16),d.cc(47,"h5",43),d.Mc(48,"Food Details"),d.bc(),d.bc(),d.Kc(49,J,8,4,"ng-container",7),d.bc(),d.bc()),2&e){const e=d.oc();d.Jb(9),d.Nc(e.detail.date),d.Jb(5),d.Nc(e.detail.customer_name?e.detail.customer_name:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.bill_id?e.detail.bill_id:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.customer_alternative_phone?e.detail.customer_alternative_phone:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.customer_phone?e.detail.customer_phone:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.customer_address?e.detail.customer_address:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.delivery_mode?e.detail.delivery_mode:"Not Mentioned"),d.Jb(5),d.Nc(e.detail.payment_mode?e.detail.payment_mode:"Not Mentioned"),d.Jb(5),d.vc("ngForOf",e.detail.products)}}const x=[{path:"",component:(()=>{class e{constructor(e,t,c,i,n,l,a){this.router=e,this.billService=t,this.userService=c,this.modeService=i,this.branchService=n,this.fb=l,this.ui=a,this.sortOrder=!1,this.selectAll=!1,this.LoadingText="abc",this.sortFields={total_price:!0,payment_mode:!0,delivery_mode:!0,customer_name:!0,user_name:!0,createdOn:!0},this.payment=[],this.delivery=[],this.billList=[],this.response="No Data to Show",this.searchedName="",this.selectedDate="",this.userNameList=[],this.selectedPerPage=1e4,this.currentpage=1,this.role="",this.getAllPaymentMode=()=>{this.modeService.getPaymentModeList().subscribe(e=>{if(e.data){this.payment.push({id:"Net Banking",name:"Net Banking"});let t=e.data.map(e=>({id:e.payment_mode_name,name:e.payment_mode_name}));this.payment=[...t,...this.payment],this.payment.push({id:"",name:"All"})}})},this.getAllDeliveryMode=()=>{this.modeService.getDeliveryModeList().subscribe(e=>{e.data&&(this.delivery=e.data.map(e=>({id:e.delivery_mode_name,name:e.delivery_mode_name})),this.delivery.push({id:"",name:"All"}))})},this.onLimitSelect=e=>{this.selectedPerPage=e,this.getBillList()},this.userService.getRole().subscribe(e=>{this.role=e,console.log(e)}),this.getBillList(),this.getAllUsers(),this.getAllPaymentMode(),this.getAllDeliveryMode(),this.getBranchDetail()}ngOnInit(){this.getBillList(),this.getAllUsers(),this.getAllPaymentMode(),this.getAllDeliveryMode(),this.getBranchDetail()}onCustomerChange(){console.log(this.searchedName),this.getBillList()}printBill(e){this.printDetail=e,setTimeout(()=>{let e,t;e=document.getElementById("print-section").innerHTML,t=window.open("","_blank","top=0,left=0,height=100%,width=auto"),t.document.open(),t.document.write(`\n        <html>\n          <head>\n  \n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <meta http-equiv="X-UA-Compatible" content="ie=edge">\n            <title>Print tab</title>\n            <style>\n            p{\n              font-size:12px;\n            }\n            \n            td,\n            th,\n            tr,\n            table {\n                font-size:14px;\n                border-top: 1px solid black;\n                border-collapse: collapse;\n            }\n            \n            td.description,\n            th.description {\n                width: 85px;\n                max-width: 85px;\n            }\n\n            td.total,\n            th.total {\n                width: 85px;\n                max-width: 85px;\n            }\n            \n            td.quantity,\n            th.quantity {\n                width: 45px;\n                max-width: 45px;\n                word-break: break-all;\n            }\n            \n            td.price,\n            th.price {\n                width: 45px;\n                max-width: 45px;\n                word-break: break-all;\n            }\n\n            td.t-price,\n            th.t-price {\n                width: 65px;\n                max-width: 65px;\n                word-break: break-all;\n            }\n            \n            .centered {\n                text-align: center;\n                align-content: center;\n            }\n            \n            .ticket {\n                width: 268px;\n                max-width: 268px;\n            }\n            \n            </style>\n          </head>\n      <body onload="window.print();window.close()">${e}</body>\n        </html>`),t.document.close()},100),e.printed="Yes",this.billService.editBill(e.bill_id,e).subscribe(e=>{})}addStatus(e){this.status=e,console.log(this.status)}editStatus(e){this.detail.status=e,console.log(this.status)}getAllUsers(){this.userService.getAllUsers(500,1).subscribe(e=>{this.userNameList.push({fullName:"ALL"});let t=e.data.result.map(e=>({fullName:`${e.firstName} ${e.lastName}`}));this.userNameList.push(...t),console.log(this.userNameList)})}getBranchDetail(){this.branchService.getBranchDetail("QtdSQrKuq").subscribe(e=>{e.data&&(this.branchDetail=e.data)})}getBillList(e){e&&(this.currentpage=e);let t={startDate:s(this.selectedStartDate).format("DD-MM-YYYY"),endDate:s(this.selectedEndDate).format("DD-MM-YYYY"),payment_mode:this.selectedPaymentMode,delivery_mode:this.selectedDeliveryMode,createdOn:this.selectedDate,user_name:this.selectedUserName,customer_name:this.searchedName},c="";for(let i in t)t[i]&&(c=`${c}${i}=${t[i]}&`);console.log(c),this.ui.loader.show(),this.billService.getBillingList(this.selectedPerPage,this.currentpage,c).subscribe(e=>{if(this.billList=[],e.data){let t=e.data.result.map(e=>Object.assign({date:s(e.createdOn).format("YYYY-MM-DD")},e));console.log(t),this.billList=t.reduce((e,t)=>{const{user_name:c,total_price:i}=t;let n=e.findIndex(e=>e.user_name===c);return-1===n?e.push({user_name:c,total_price:i}):e[n].total_price+=i,e},[]),this.total=parseInt(e.data.total.split("-")[0]).toFixed(2),e.data.result.length>0&&(this.totalPage=e.data.total.split("-")[1],console.log(this.totalPage))}else this.total=0;this.ui.loader.hide(),console.log(this.billList)},e=>this.ui.loader.hide())}onOptionSelect(e,t){"payment"===e?this.selectedPaymentMode=t:"delivery"===e?this.selectedDeliveryMode=t:"user"===e?this.selectedUserName="ALL"===t?"":t:"date"===e&&(this.selectedDate=t),this.getBillList()}onDateSelect(){this.selectedStartDate?this.selectedEndDate?this.getBillList():o.a.fire({icon:"warning",title:"Please Select End Date",showConfirmButton:!1,timer:1500}):o.a.fire({icon:"warning",title:"Please Select Start Date",showConfirmButton:!1,timer:1500})}changedDate(e,t){"start"===e?this.selectedStartDate=t:"end"===e&&(this.selectedEndDate=t),console.log(this.selectedStartDate),console.log(this.selectedEndDate)}changeOrder(e){this.sortOrder=!this.sortOrder,this.field=e,this.sortFields[e]=this.sortOrder,this.billList.sort((t,c)=>"total_price"===e?this.sortOrder?c[e]-t[e]:t[e]-c[e]:this.sortOrder?c[e].localeCompare(t[e]):t[e].localeCompare(c[e]))}deleteBill(e,t){o.a.fire({title:"Do you want to delete this Bill?",showCancelButton:!0,confirmButtonText:"YES",cancelButtonText:"CANCEL"}).then(c=>{c.isConfirmed&&(this.ui.loader.show(),this.billService.deleteBill(t).subscribe(t=>{o.a.fire({icon:"success",title:"Bill Deleted Successfully",showConfirmButton:!1,timer:1500}),this.billList.splice(e,1),this.ui.loader.hide()},e=>this.ui.loader.hide()))})}getBillDetail(e){this.ui.loader.show(),this.billService.getBillDetail(e).subscribe(e=>{e.data&&(this.detail=e.data,this.ui.loader.hide())},e=>this.ui.loader.hide())}editBill(e){this.ui.loader.show(),delete this.detail.validationToken,delete this.detail.createdOn,this.billService.editBill(e,this.detail).subscribe(e=>{this.closeEditModal.nativeElement.click(),this.detail={},this.ui.loader.hide(),this.getBillList()},e=>{this.ui.loader.hide()})}payMode(e){this.selectedPaymentMode=e,"All"===this.selectedPaymentMode&&(this.selectedPaymentMode="")}deliveryMode(e){this.selectedDeliveryMode=e,"All"===this.selectedDeliveryMode&&(this.selectedDeliveryMode="")}onUserSelect(e){this.selectedUserName=e,"CLEAR SEARCH"===this.selectedUserName&&(this.selectedUserName="")}}return e.\u0275fac=function(t){return new(t||e)(d.Wb(l.e),d.Wb(r.a),d.Wb(b.a),d.Wb(h.a),d.Wb(u.a),d.Wb(n.c),d.Wb(m.a))},e.\u0275cmp=d.Qb({type:e,selectors:[["app-employee-wise"]],viewQuery:function(e,t){var c;1&e&&d.Rc(g,!0),2&e&&d.Cc(c=d.lc())&&(t.closeEditModal=c.first)},decls:59,vars:22,consts:[[1,"container-fluid","main-container"],[1,"row","dash-tab"],[1,"col-md-4","col-sm-12"],[1,"form-group"],[2,"color","#69d73d"],[1,"col-sm-2","cus-srch"],["name","pay","id","pay",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[4,"ngFor","ngForOf"],["name","dev","id","dev",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["name","cars","id","cars",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3","cus-srch"],["type","date","id","birthday1","placeholder","From Date","name","selectedSDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],["type","date","id","birthday2","placeholder","To Date","name","selectedEDate",1,"form-control","pl-0",3,"ngModel","ngModelChange","change"],[1,"col-sm-3"],[1,"form-group","mt-3"],[1,"shortcut-btn","w-100",3,"click"],[1,"col-sm-12"],[1,"table","scrollmenu"],[1,"details_table"],[4,"ngIf"],["scope","col"],["href","javascript:void(0)",1,"caret-sort",3,"click"],[1,"fa"],[4,"ngIf","ngIfElse"],["elseBlock",""],[2,"text-align","center",3,"pageChange"],["id","viewModal","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true",1,"modal","fade"],["viewModal",""],[1,"modal-dialog"],["class","modal-content","style","padding:2%",4,"ngIf"],[3,"value"],["yesBlock",""],["type","button",1,"btn","btn-success","btn-sm",2,"margin-left","4px",3,"click"],[1,"fa","fa-print"],["type","button",1,"btn","btn-danger","btn-sm",2,"margin-left","4px",3,"click"],["type","button","data-toggle","modal","data-target","#viewModal",1,"btn","btn-success","btn-sm",2,"margin-left","4px",3,"click"],[1,"fa","fa-eye"],["colspan","100%",1,"text-center"],[1,"modal-content",2,"padding","2%"],[1,"row"],[1,"col-6"],[1,"col-sm-6"],[2,"font-weight","bold"],[2,"text-align","center"],[2,"color","red"]],template:function(e,t){if(1&e&&(d.cc(0,"div",0),d.cc(1,"div",1),d.cc(2,"div",2),d.cc(3,"div",3),d.cc(4,"h4"),d.Mc(5,"TOTAL SALES : \u20b9 "),d.cc(6,"span",4),d.Mc(7),d.bc(),d.bc(),d.bc(),d.bc(),d.cc(8,"div",5),d.cc(9,"div",3),d.Mc(10," PAYMENT OPTION "),d.cc(11,"select",6),d.kc("ngModelChange",(function(e){return t.selectedPaymentMode=e}))("change",(function(e){return t.onOptionSelect("payment",e.target.value)})),d.Kc(12,f,3,2,"ng-container",7),d.bc(),d.bc(),d.bc(),d.cc(13,"div",5),d.cc(14,"div",3),d.Mc(15," BILL TYPE "),d.cc(16,"select",8),d.kc("ngModelChange",(function(e){return t.selectedDeliveryMode=e}))("change",(function(e){return t.onOptionSelect("delivery",e.target.value)})),d.Kc(17,v,3,2,"ng-container",7),d.bc(),d.bc(),d.bc(),d.cc(18,"div",5),d.cc(19,"div",3),d.Mc(20," BILL BY "),d.cc(21,"select",9),d.kc("ngModelChange",(function(e){return t.selectedUserName=e}))("change",(function(e){return t.onOptionSelect("user",e.target.value)})),d.Kc(22,M,3,2,"ng-container",7),d.bc(),d.bc(),d.bc(),d.cc(23,"div",10),d.cc(24,"div",3),d.Mc(25," FROM DATE "),d.cc(26,"input",11),d.kc("ngModelChange",(function(e){return t.selectedStartDate=e}))("change",(function(e){return t.changedDate("start",e.target.value)})),d.bc(),d.bc(),d.bc(),d.cc(27,"div",10),d.cc(28,"div",3),d.Mc(29," TO DATE "),d.cc(30,"input",12),d.kc("ngModelChange",(function(e){return t.selectedEndDate=e}))("change",(function(e){return t.changedDate("end",e.target.value)})),d.bc(),d.bc(),d.bc(),d.cc(31,"div",13),d.cc(32,"div",14),d.cc(33,"button",15),d.kc("click",(function(){return t.onDateSelect()})),d.cc(34,"b"),d.Mc(35,"SEARCH"),d.bc(),d.bc(),d.bc(),d.bc(),d.cc(36,"div",16),d.cc(37,"div",17),d.cc(38,"table",18),d.cc(39,"thead"),d.cc(40,"tr"),d.Kc(41,y,3,0,"ng-container",19),d.Kc(42,w,3,0,"ng-container",19),d.cc(43,"th",20),d.Mc(44,"Bill By "),d.cc(45,"a",21),d.kc("click",(function(){return t.changeOrder("user_name")})),d.Xb(46,"i",22),d.bc(),d.bc(),d.cc(47,"th",20),d.Mc(48,"Price "),d.cc(49,"a",21),d.kc("click",(function(){return t.changeOrder("total_price")})),d.Xb(50,"i",22),d.bc(),d.bc(),d.bc(),d.bc(),d.Kc(51,P,3,8,"tbody",23),d.Kc(52,S,4,1,"ng-template",null,24,d.Lc),d.bc(),d.cc(54,"pagination-controls",25),d.kc("pageChange",(function(e){return t.getBillList(e)})),d.bc(),d.bc(),d.bc(),d.bc(),d.bc(),d.cc(55,"div",26,27),d.cc(57,"div",28),d.Kc(58,O,50,9,"div",29),d.bc(),d.bc()),2&e){const e=d.Dc(53);d.Jb(7),d.Nc(t.total),d.Jb(4),d.vc("ngModel",t.selectedPaymentMode),d.Jb(1),d.vc("ngForOf",t.payment),d.Jb(4),d.vc("ngModel",t.selectedDeliveryMode),d.Jb(1),d.vc("ngForOf",t.delivery),d.Jb(4),d.vc("ngModel",t.selectedUserName),d.Jb(1),d.vc("ngForOf",t.userNameList),d.Jb(4),d.vc("ngModel",t.selectedStartDate),d.Jb(4),d.vc("ngModel",t.selectedEndDate),d.Jb(11),d.vc("ngIf","operator"===t.role),d.Jb(1),d.vc("ngIf","operator"===t.role),d.Jb(4),d.Nb("fa-caret-down",t.sortFields.user_name)("fa-caret-up",!t.sortFields.user_name),d.Jb(4),d.Nb("fa-caret-down",t.sortFields.total_price)("fa-caret-up",!t.sortFields.total_price),d.Jb(1),d.vc("ngIf",null==t.billList?null:t.billList.length)("ngIfElse",e),d.Jb(7),d.vc("ngIf",t.detail)}},directives:[n.q,n.h,n.k,i.k,n.b,i.l,p.c,n.l,n.s],pipes:[p.b,i.r],styles:["[_ngcontent-%COMP%]::-webkit-datetime-edit{padding:1em}[_ngcontent-%COMP%]::-webkit-datetime-edit-text{padding:0 .3em}[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{color:green}div.scrollmenu[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:inline-block;text-align:center;padding:14px;text-decoration:none;border:1px solid #00f}@media print{.main-container[_ngcontent-%COMP%]{visibility:hidden}.print-container[_ngcontent-%COMP%]{visibility:visible}}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},imports:[[l.i.forChild(x)],l.i]}),e})();var A=c("wloI"),E=c("YUSg"),I=c("i2NW"),F=c("X+I5");c.d(t,"EmployeeWiseModule",(function(){return T}));let T=(()=>{class e{}return e.\u0275mod=d.Ub({type:e}),e.\u0275inj=d.Tb({factory:function(t){return new(t||e)},providers:[F.a],imports:[[i.b,n.d,n.o,C,E.a,E.b,I.a,A.a,p.a]]}),e})()}}]);